# Introduction To OS

## 🍎 운영체제 입문

### 📖 운영체제란?
- 작은 의미에선 커널.
- 큰 의미에선 커널을 포함한 애플리케이션, 유틸리티.
- 운영체제의 목적은 **컴퓨터 시스템의 자원을 효율적으로 관리하는것!**

### 📖 커널이란?
- 운영체제의 핵심 부분으로 항상 메모리에 상주한다.
    - 왜 "메모리에 상주한다" 라는 표현을 쓸까?
    - 우리가 운영체제를 접하는 순간은 전원버튼을 누르고 Windows나 MacOS를 통해 운영체제가 실행 되었을 때.
        - 운영체제도 메모리에 올라와 실행되는 하나의 프로세스다.
        - 즉, 우리가 컴퓨터의 전원을 켠다 -> BIOS가 메모리에 운영체제를 올린다. -> 운영체제에 커널이 있기 때문에 따로 올리지 않아도 이미 올라가 있는 셈.

### 📖 운영체제의 분류
- 동시 작업 가능 여부
    - 단일 작업
        - 이전의 운영체제
        - 한번에 하나의 작업만 수행 가능!
    - 다중 작업
        - 현대의 운영체제
        - 동시에 두개 이상의 작업 수행 가능!
- 사용자 수
    - 단일 사용자
        - 일반 컴퓨터
    - 다중 사용자
        - 서버
- 처리 방식
    - 일괄처리 (batch processing) -> 작업 요청을 일정량 모아서 한꺼번에 처리.
        - 작업이 완전 종료될 때 까지 기다려야 한다.
        - 현대 운영체제에서는 찾아보기 힘든 방식
        - 예시
            - 예전에는 동사무소에서 주민등록등본을 요구하면 30분 기다리라고 한다.
            - 직원이 30분동안 주민등록등본을 요구한 사람들의 신분증을 모아 창고로 들어가 필요한 서류를 한번에 가져왔다고 한다.
            - 그 당시에는 지금처럼의 시스템이 없었기 때문이었고 직원이 매번 왔다갔다 할 수 없으니 신분증을 일정량 모아 한번에 처리하는 방식인 일괄 처리 방식을 사용했다고 한다.
    - 시분할 (time sharing)
        - 여러 작업 수행시 cpu를 일정한 시간 단위로 분할하여 사용
        - 즉, "CPU가 각각의 프로세스에게 아주 짧은 시간 동안 CPU의 사용 권한을 준다"고 생각하면 된다.
    - 실시간 (Realtime OS)
        - 정해진 시간 안에 어떠한 일이 반드시 종료됨이 보장 되어야 하는 실시간 시스템들을 위한 OS -> dead line이 있다.
        - 예) 원자로, 미사일 제어, 반도체 장비, 로보트 제어
    - 시분할과 실시간은 비슷해 보이는데 무슨 차이가 있을까?
        - 일반적으로 시분할 처리 방식은 일반 컴퓨터에서 사용하고 하나의 CPU로 여러 프로그램에 통제권을 아주 빠르게 번갈아가며 실행한다, 하지만 실시간 처리 방식은 특정 목적을 가지는 시스템에서 사용하는만큼 하나의 CPU 통제권을 가지고 임무를 수행한다.
    

### 📖 운영체제의 구조
- CPU -> 누구한테 CPU를 줄까?
    - CPU 스케쥴링
- Memory -> 한정된 메모리를 어떻게 잘 관리하지?
    - Memory Management(메모리 관리)
- Disk -> 디스크에 파일은 어떻게 접근/보관하지?
    - 파일 관리
    - 엘레베이터 로직
        - 디스크는 헤드가 이동하면서 처리할게 있으면 처리하고 간다.
- I.O devices -> 컴퓨터와 어떻게 정보를 주고 받게 하지?
    - 이전에는 폴링 방식(CPU가 본인이 할 일을 하지 못하고 계속 입출력 관리자에게 계속 물어보는 로직)을 사용해 입출력 디바이스와 소통했다.
    - 즉, CPU를 잘 사용하지 못했다. 이런 비효율적인 방법을 대체하기 위해 나온것이 인터럽트(Interrupt)이다.
    - 인터럽트
        - CPU가 쉴 새 없이 일할때 평소에는 I.O 기기에 관여를 안한다.
        - 하지만 I.O 기기에서 Interrupt 신호를 CPU에게 보고하면 다음 작업을 수행하기 전에 I.O에서 들어온 작업을 처리하고 간다.
            - 더 자세히는 I/O Device에서 입력이 들어오면 Local buffer에 데이터를 저장하고, I/O Device Controller에서 CPU에게 Interrupt 신호를 보낸다.
            - CPU는 하나의 Instruction이 끝나면 Interrupt 라인에 무엇이 들어와있는지 체크한 후 인터럽트를 수행하기 위해 OS에게 자신의 소유권을 넘긴다.
    - 인터럽트의 종류
        - 하드웨어 인터럽트 -> Interrupt
        - 소프트웨어 인터럽트 -> Trap
            - System Call과 Exception 두가지가 있다. (둘 다 Trap이다! 왜? 소프트웨어 인터럽트니까!)
            - System Call
                - 프로그램이 I/O 요청을 이유로 커널 함수를 호출하는 경우
            - Exception
                - 프로그램이 오류를 범한 경우
                - 0으로 나누려는 경우
                - 운영체제의 메모리에 접근하려는 경우
        - 인터럽트 관련 용어
            - 인터럽트 벡터
                - 해당 인터럽트의 처리 루틴 주소를 가지고 있음
                - 인터럽트를 어떻게 처리하는 방법들의 주소들을 가지고 있음
                - 실제 인터럽트를 처리하는 주소들을 가진 모음집이라고 생각하면됨
            - 인터럽트 처리 루틴
                - 인터럽트 핸들러 라고도 불리며
                - 해당 인터럽트를 처리하는 커널 함수이다.
                - 실제 인터럽트를 처리하는 코드라고 생각하면됨
            - 인터럽트 벡터는 인터럽트 처리 루틴들의 주소를 가지고 있는 배열이라고 생각하면 쉽다!
            - IV = ["A1를 처리하기 위한 ISR 주소", "A2를 처리하기 위한 ISR 주소",..."Z99를 처리하기 위한 ISR주소"]
            - A1 인터럽트 처리 루틴을 실행해야하면 IV[0]의 주소를 찾아가서 루틴을 실행한다.

-------------------- 이하 강의 내용 --------------------


## 🍎 운영체제가 하는 일

### 📖 프로세스관리
- 멀티 프로그래밍 vs 멀티 프로세싱
- 운영체제가 프로세스를 관리하지 않는다면 하나의 프로그램(프로세스)이 CPU를 독차지해 그동안 다른 프로그램이 실행되지 않을수 있다.
    - 크롬, 지니뮤직, 롤 그림 예제
- 멀티 프로그래밍 (사용자 시점)
    - 입출력 작업을 담당 컨트롤러에 맡기고 그 시간에 다른 프로세스를 실행하는 것.
- 멀티 태스킹 (단일 CPU 시점)
    - 단일 CPU가 짧은 텀으로 여러 프로세스를 실행해 여러 응용 프로그램이 동시에 실행되는 것처럼 보이도록 하는 시스템
- 멀티 프로세싱 (다중 CPU 시점)
    - 다수의 CPU가 서로 협력적으로 각각의 프로세스를 처리하는것
    - 즉, 멀티 태스킹을 하는 CPU가 여러개 모여 다대다 일처리를 하는 것을 멀티 프로세싱이라 한다.

### 📖 메모리 관리
- 모든 프로그램은 메모리에 올라와서 동작한다.
- 오늘날 운영체제는 여러 프로그램을 동시에 실행시키기 때문에 여러 프로그램을 메모리에서 관리하는 방법을 알아보자.

### 📖 하드웨어 관리
- 하드웨어 관리
    - 하드디스크에 데이터를 저장할 때, 사용자가 저장하려고 하는 곳에 중요한 정보가 있을수 있으므로 운영체제가 대신 그 일을 처리해준다.

### 📖 파일 시스템 관리
- 하드디스크에 많은 파일들의 효율적인 저장과 관리하기 위한 방법 (파일 시스템)

### 📖 UNIX
- AT&T 벨 연구소에서 C언어로 운영체제를 개발했는데 이것이 UNIX.
    - 멀티 프로그래밍
    - 다중 사용자
    - 파일 시스템


## 🍎 운영체제의 구조

### 📖 운영체제의 핵심은 커널
- 프로세스, 메모리, 저장 장치를 관리하는 기능을 담당.
- 유저는 OS의 커널에 직접 접근할 수 없고 인터페이스를 통해 접근이 가능하다.
    - 사용자가 하드웨어를 사용할 수 있게 도와주는 "드라이버"
    - 드라이버의 위치는 아래와 같다.
    - 하드웨어(L1 Physical) - 드라이버(L2 DataLink 분류는 SW지만 HW와 연결고리) - 커널(L3 Network Transport)

## 🍎 컴퓨터 하드웨어와 구조
- 오늘날 대부분의 컴퓨터는 폰 노이만 구조를 하고있다.
    - CPU와 메모리를 두고 이들 사이를 버스로 연결한다.
        - 버스는 데이터를 전달하는 통로
    - 프로그램은 메모리에 올려서 실행시키는데 프로그램을 메모리에 내장했다고 해서 "프로그램 내장 방식"이라고 한다.
    - 메모리에 올라간 프로그램은 배선을 바꾸는 대신 소프트웨어만 바꿔주면 되기 때문에 상당히 편해졌다
- 컴퓨터 하드웨어의 가장 기본적 구조
    - 메인보드
        - 장치간 데이터를 전송 -> 메인보드의 버스가 담당
        - 폰노이만 구조니까 메인보드에는 CPU와 메모리가 필수적이다.
    - CPU의 구조
        - 산술논리 연산장치 -> CPU에서 실제로 데이터 연산을 담당하는 장치
        - 제어장치 -> 모든 장치들의 동작을 지시하고 제어하는 장치
        - 레지스터 -> CPU내에서 계산을 위해 임시로 보관하는 장치
    - 메모리 종류
        - RAM
            - 랜덤으로 데이터를 읽어도 저장된 위치와 상관없이 읽는 속도가 같다.
            - 휘발성
        - ROM
            - BIOS 저장
## 🍎 컴퓨터의 부팅과정
- 전원버튼
- ROM 바이오스 실행
    - 바이오스는 주요 하드웨어(모니터, 키보드, 하드디스크 등등)에 이상이 없는지 체크
- 메모리에 운영체제를 올려 실행시킨다.

## 🍎 인터럽트
- 폴링방식 -> CPU가 본인이 할 일을 하지 못하고 계속 입출력 관리자에게 묻는 일
- 이 방법이 너무 비 효율적이라 나온것이 인터럽트.
- 인터럽트 서비스 루틴은 특정 인터럽트가 들어오면 실행되는 함수 (비동기적으로 실행)
    - 하드웨어 방식
    - 소프트웨어 방식
        - 유효하지 않은 메모리에 접근
        - 0으로 나누는 작업
