# Process Management

## 🍎 프로세스 생성
### 📖 프로세스 생성에 관한 기본적 정의
- 부모 프로세스가 자식 프로세스 생성 (여럿을 낳을 수 있다)
- 프로세스의 트리(계층 구조) 형성
- 프로세스는 자원을 필요로 한다.
    - 운영체제로부터 받는다.
    - 경우에 따라 자원을 공유하기도 하지만, 보통적인 상황에서는 공유하지 않는다.
    - 부모, 자식 프로세스라고 부르긴 하지만 서로 CPU를 얻기 위해서 경쟁하는 사이(남)라고 생각하면 된다.
- 프로세스의 수행에 있어서 부모와 자식이 공존하면서 각자 수행되는 모델이 있고, 자식이 종료(terminate)될 때까지 부모가 기다리는(wait) 모델이 있다.
    - 여기서 wait은 blocked 상태

### 📖 실제 프로세스 생성 과정
- **부모 프로세스의 주소공간을 자식 프로세스가 그대로 복사를 한다**
- **자식은 그 주소공간에 새로운 프로그램을 올린다**(덮어 씌운다).
- 유닉스의 예
    - fork()라는 시스템 콜이 새로운 프로세스를 생성
        - 부모 프로세스 주소공간을 그대로 복사(OS data except PID + binary) 후 할당
    - fork 시스템 콜 다음에 이어지는 exec() 시스템 콜을 통해 새로운 프로그램을 메모리에 올림
- 복사하는 fork()와 exec()은 같이 실행되어야 하는것은 아니다. 각각 실행되어 fork로 주소공간만 복사할 수 있고, exec()로 주소공간에 새로운 프로그램을 덮어씌워 메모리에 올릴수도 있다.
- 사용자 프로그램(프로세스)가 마음대로 복사하는것이 아니다. fork(), exec()은 시스템 콜이라고 했다. 즉, **운영체제에게 자식을 낳아달라고 부탁 해서 운영체제가 대신 자식 프로세스를 낳아주는 개념**이라고 생각하면 된다.

## 🍎 프로세스 종료
### 📖 정의
- 프로세스가 마지막 명령을 수행한 후 운영체제에게 이를 알려줌(exit)
    - exit()이라는 시스템 콜을 하면 프로세스가 종료된다.
- **프로세스가 종료될때 자식이 부모에게 data를 보낸다(wait() 시스템 콜을 통해서 data 전달)**
    - 프로세스의 세계에서는 자식이 부모보다 먼저 종료된다.
- **프로세스의 각종 자원들이 운영체제에게 반납됨**
### 📖 자발적 종료, 비자발적 종료
- 자발적으로 프로세스가 종료가 될때는 exit() 시스템콜을 해주고 비 자발적으로 프로세스가 종료되는 경우는 abort라고 한다.
- 위에서 자발적으로 종료되는 경우를 다뤘으니 비자발적으로 종료되는 경우를 살펴보자.
- 즉, 부모 프로세스가 자식 프로세스를 종료 시키는 경우이다.
    - 자식이 할당 자원의 한계치를 넘어섬
        - 너무 많은 자원을 소모하면 종료시킴
    - 자식에게 할당된 테스크가 더 이상 필요하지 않음
        - 자식이 더 이상 필요없으면 종료시킴 
    - 부모가 종료(exit)하는 경우
        - 운영체제는 부모 프로세스가 종료하는 경우 자식이 더 이상 수행되도록 두지 않는다.
        - **프로세스 세계에서는 자식이 부모보다 먼저 종료되어야 한다고 했다.** 하지만 어떤 경우에는 부모가 먼저 종료되는데 이때는 부모 프로세스를 통해 생성된 자식 프로세스(들)을 먼저 다 종료 시킨 후에 부모 프로세스가 종료된다.
