# TCP / IP Structure
- TCP/IP 송수신 구조를 알아보자.

## 🍎 파리에서 에펠탑을 서울로 보내려면 어떻게 해야 할까?
- 에펠탑(보내려는 주체)을 박스(Packet)의 크기(MTU)만큼 분해
- 운송
- 택배를 받으면서 조립

## 🍎 컴퓨터와 컴퓨터가 어떻게 통신하는지 대략적으로 알아보자.
- PC에서 보낸 패킷이 L2 Access Switch를 타고 Router를 거쳐 인터넷을 통해 목적지의 Router를 거쳐 L2 Access Switch를 타고 목적지에 도달하게 된다.
<img src='./ConnectionMap.jpg' width=700>

## 🍎 서버에서 클라이언트에 데이터를 보내는 과정을 알아보자.
1. 서버가 클라이언트에 보낼  자료가 있는 HDD 또는 SSD이다.
    - 예를 들어 클라이언트에 보낼 파일의 크기가 1.4MB라고 하자.
    - 그 아래 그림은 파일을 형상화한 모델.
2. 프로세스는 HDD에 있는 파일을 process buffer의 크기만큼 일부 가져온다.
    - process buffer의 크기는 누가 정할까? → 프로그램을 개발한 사람이 정할 수 있다. 
        - (해당 프로그램 개발자가 한번에 1.4 MB을 모두 가져올 것인지 아니면 일부를 가져올 것인지 정할수 있다는 이야기)
    - 이미지에서는 8개중 3개(일부)를 가져왔다. 더 정확히는 HDD내 파일의 일부(3개)를 process buffer로 Copy한것이다.
    - 이후, process가 현재 process buffer에 있는 데이터를 send하겠다고 하면 다시 socket buffer로 copy 한다.   
3. 중요! 그림에서는 1번에서 2번으로 넘어가는 시점을 봤을때 File에서 데이터를 가져올 때부터 데이터를 잘라서 가져온것처럼 보이지만, 쪼개서 가져온것이 아니라 일부를 통째로 가져온것이고 실제로 데이터를 패킷 형태로 보내기위해 분할하는 구간은 L4 layer로 넘어가는 노란 동그라미 부분이다.
    - 이 작업을 Segmentation이라고 한다.
5. Segmentation 이후 분할된 segment에 header를 붙여가면서 캡슐화를 진행하고 전송한다. TCP의 경우에는 순서를 보장해야하므로 segment에 번호를 붙여 순서를 지키면서 전송한다.

<img src='./ServerToClient.jpg' width=700>

## 🍎 클라이언트가 서버에서 데이터를 받는 과정을 알아보자.
